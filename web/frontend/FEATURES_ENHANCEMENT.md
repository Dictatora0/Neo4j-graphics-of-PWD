# Web 前端功能增强说明

## ✨ 新增功能

### 1. 搜索功能

- **组件**: `SearchBar.tsx`
- **功能**: 实时搜索节点名称，高亮匹配节点
- **快捷键**: 输入关键词后自动搜索
- **视觉效果**: 搜索匹配的节点显示红色边框高亮

### 2. 筛选功能

- **组件**: `FilterPanel.tsx`
- **功能**:
  - 按节点类别筛选（多选）
  - 按重要性范围筛选（1-5 星）
- **交互**: 点击"筛选"按钮打开面板，应用或重置筛选
- **视觉效果**: 未匹配的节点半透明显示

### 3. 统计面板

- **组件**: `StatsPanel.tsx`
- **功能**:
  - 总节点数、总关系数、平均度数、节点类别数量
  - 类别分布饼图
  - 节点数量柱状图
  - 重要性分布水平柱状图
- **交互**: 点击顶部"统计面板"按钮切换显示

### 4. 图谱交互增强

- **邻居高亮**: 点击节点时自动高亮显示其所有邻居节点和连接
- **多种布局算法**:
  - 力导向布局（默认）
  - 环形布局
  - 网格布局
  - 同心圆布局
  - 层次布局
- **导出图片**: 一键导出当前图谱为 PNG 高清图片
- **缩放控制**: 放大、缩小、适应画布

### 5. UI 美化

- **渐变背景**: 主界面采用渐变背景色
- **毛玻璃效果**: 导航栏、侧边栏、工具栏使用半透明毛玻璃效果
- **渐变标题**: 标题使用蓝紫渐变色
- **现代化图标**: 使用 lucide-react 图标库
- **星级评分**: 节点重要性显示为星星图标
- **渐变按钮**: 统计面板按钮使用渐变背景和悬停动画

## 🎨 视觉改进

### 颜色方案

- 主色调: 蓝色 (#3b82f6) 和紫色 (#8b5cf6) 渐变
- 强调色: 绿色、橙色、黄色用于数据展示
- 背景: 浅灰到浅蓝渐变

### 交互反馈

- 按钮悬停: 阴影加深、颜色加深
- 节点高亮: 橙色边框（选中）、绿色边框（邻居）、红色边框（搜索）
- 过渡动画: 所有交互都有流畅的过渡效果

## 📦 新增依赖

```json
{
  "lucide-react": "^latest", // 图标库
  "recharts": "^latest" // 图表库
}
```

## 🚀 启动方式

### Docker 方式（推荐）

```bash
# 重新构建前端镜像
cd /Users/lifulin/Desktop/PWD
make build-frontend

# 重启前端服务
make restart-frontend

# 访问
open http://localhost
```

### 本地开发方式

```bash
# 进入前端目录
cd /Users/lifulin/Desktop/PWD/web/frontend

# 开发模式（热更新）
npm run dev

# 访问
open http://localhost:5173
```

### 生产构建

```bash
cd /Users/lifulin/Desktop/PWD/web/frontend

# 构建
npm run build

# 预览构建结果
npm run preview
```

## 📝 使用说明

### 搜索节点

1. 在顶部工具栏的搜索框输入节点名称
2. 匹配的节点会以红色边框高亮显示
3. 点击搜索框右侧的 X 按钮清除搜索

### 筛选节点

1. 点击工具栏的"筛选"按钮
2. 勾选需要显示的节点类别
3. 设置重要性范围（1-5）
4. 点击"应用"按钮生效
5. 未匹配的节点会半透明显示

### 查看统计

1. 点击顶部导航栏的"统计面板"按钮
2. 左侧会展开统计面板，显示：
   - 4 个数据卡片
   - 类别分布饼图
   - 节点数量柱状图
   - 重要性分布图
3. 再次点击按钮或点击面板中的 X 按钮关闭

### 图谱交互

1. **选择节点**: 点击任意节点
   - 节点显示橙色边框
   - 邻居节点显示绿色边框
   - 右侧显示节点详情
2. **切换布局**: 点击右侧控制面板的"布局"图标
   - 选择不同的布局算法
   - 图谱会动画过渡到新布局
3. **导出图片**: 点击下载图标
   - 自动生成高清 PNG 图片
   - 文件名包含时间戳

## 🔧 技术实现

### 组件结构

```
src/
├── components/
│   ├── GraphViewer.tsx      // 图谱可视化（增强）
│   ├── SearchBar.tsx         // 搜索组件（新增）
│   ├── FilterPanel.tsx       // 筛选组件（新增）
│   └── StatsPanel.tsx        // 统计面板（新增）
├── types/
│   └── graph.ts              // 类型定义（更新）
└── App.tsx                   // 主应用（重构）
```

### 关键技术点

1. **Cytoscape.js 样式系统**: 使用 CSS 类名控制节点高亮状态
2. **React Hooks**: useState 管理搜索、筛选状态
3. **Recharts**: 响应式图表组件
4. **Tailwind CSS**: 工具类样式和渐变效果
5. **Lucide Icons**: 轻量级 SVG 图标

## 🎯 性能优化

- 搜索和筛选使用 useMemo 优化计算
- 图谱只在数据变化时重新渲染
- 统计面板按需加载，不影响主图谱性能
- 图片导出使用 Cytoscape 内置高效方法

## 📸 功能截图说明

主要视觉特点：

- 渐变背景和毛玻璃效果营造现代感
- 搜索框和筛选器集成在工具栏
- 统计面板可折叠，不遮挡主视图
- 节点详情面板显示星级评分
- 控制按钮垂直排列在右侧
- 图例显示在左下角

## 🐛 已知问题

无

## 🔮 未来计划

- [ ] 添加深色模式切换
- [ ] 节点拖拽锁定功能
- [ ] 路径查找可视化
- [ ] 子图提取功能
- [ ] 时间轴动画
- [ ] 社区检测可视化
- [ ] 导出 SVG 格式
- [ ] 全屏模式

## 📧 反馈

如有问题或建议，请在项目中提 Issue。
