# 快速开始指南

## 🚀 立即运行改进后的系统

### 1. 确认环境

```bash
# 检查 Ollama 是否运行
curl http://localhost:11434/api/tags

# 检查模型是否可用
ollama list | grep llama3.2
```

### 2. 运行完整流程

```bash
# 推荐: 使用完整工作流脚本
./run_complete_workflow.sh

# 或者: 直接运行
python main.py
```

### 3. 预期时间

- **处理时间**: 约 **37.5 分钟** ⚡ (已优化，减少 50%时间)
- **处理块数**: 150 块 (共 321 块的 46.7%)
- **预期概念**: 250-300 个

---

## 改进对比

### 配置变化

| 参数              | 改进前 | 改进后     |
| ----------------- | ------ | ---------- |
| `max_chunks`      | 50     | **150** ⬆️ |
| `min_importance`  | 2      | **1** ⬇️   |
| `min_connections` | 1      | **0** ⬇️   |

### 提示词变化

| 方面     | 改进前   | 改进后              |
| -------- | -------- | ------------------- |
| 语言     | 英文通用 | **中文领域特定** ✨ |
| 领域词汇 | 无       | **9 类专业术语** ✨ |
| 关系类型 | 模糊     | **9 种明确关系** ✨ |

### 功能增强

- ✅ **类别标准化**: 统一中英文类别到中文
- ✅ **通用词过滤**: 自动过滤 20+ 种通用概念
- ✅ **领域聚焦**: 针对松材线虫病的专业提取

---

## 🎯 预期改进效果

### 概念质量

**改进前**:

- ❌ compound, disease, factor (通用)
- ❌ 122 个概念 (偏少)
- ❌ 中英文混杂

**改进后**:

- ✅ 松材线虫, 松褐天牛, 马尾松 (具体)
- ✅ 200-300 个概念 (充足)
- ✅ 统一中文类别

### 关系质量

**改进前**:

- ❌ 97.7% 共现关系
- ❌ 2.3% 语义关系

**改进后**:

- ✅ 80-90% 共现关系
- ✅ 10-20% 语义关系 (提升 4-9 倍)

---

## 📁 查看结果

### 统计报告

```bash
cat output/statistics_report.txt
```

### 概念列表

```bash
# CSV 格式
head -50 output/triples/triples_*.csv

# JSON 格式
cat output/triples/triples_*.json | jq '.concepts[:10]'
```

### Neo4j 图谱

```bash
# 启动 Neo4j 并查看
./view_results.sh
```

---

## 配置调整选项

### 如果想要更快 (快速测试):

```yaml
llm:
  max_chunks: 100 # 减少到 100
```

**时间**: **25 分钟**  
**概念**: 200-250 个

### 如果想要更好质量 (完整处理):

```yaml
llm:
  max_chunks: null # 处理全部 321 块
```

**时间**: **80 分钟** (1.3 小时)  
**概念**: 400-600 个

### 如果想要最高质量:

```yaml
llm:
  model: mistral # 切换到7B模型
  max_chunks: 200
```

**时间**: 2-3 小时  
**概念**: 400-500 个 (质量更高)

---

## 监控运行

### 查看实时日志

```bash
tail -f output/kg_builder.log
```

### 关键指标

- ✅ **成功块数**: 应该接近 150
- ✅ **失败块数**: 应该 < 10
- ✅ **概念数**: 应该 > 200
- ✅ **关系数**: 应该 > 1000

---

## 🐛 问题排查

### Ollama 连接失败

```bash
# 启动 Ollama
ollama serve

# 拉取模型
ollama pull llama3.2:3b
```

### JSON 解析失败过多

- 查看日志中的错误信息
- 考虑增加 `timeout` 到 180
- 尝试切换模型到 `qwen`

### 概念数量仍然偏少

- 检查 `max_chunks` 是否生效
- 降低 `min_importance` 到 0
- 查看被过滤的通用概念数量

---

## 📝 下一步建议

### 运行后分析:

1. **查看统计报告**: 了解实际提取效果
2. **检查概念质量**: 是否有足够的具体概念
3. **验证关系类型**: 语义关系比例是否提升
4. **Neo4j 可视化**: 图谱结构是否合理

### 根据结果调整:

- **概念太多**: 提高 `min_importance` 或 `min_connections`
- **概念太少**: 降低过滤阈值或增加 `max_chunks`
- **质量不佳**: 切换到更大模型或优化提示词

---

## 💡 提示

- 首次运行建议使用**方案 B** (当前配置)
- 观察效果后再决定是否调整
- 保留日志文件以便分析问题
- 可以随时中断并从缓存恢复

**祝运行顺利！** 🎉
