#!/bin/bash
################################################################################
# å‡†å¤‡Colabä¸Šä¼ æ–‡ä»¶
# ç”¨é€”: æ‰“åŒ…é¡¹ç›®æ–‡ä»¶ï¼Œå‡†å¤‡ä¸Šä¼ åˆ°Google Drive
################################################################################

set -e

# é¢œè‰²å®šä¹‰
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo -e "${BLUE}  å‡†å¤‡Colabä¸Šä¼ æ–‡ä»¶${NC}"
echo -e "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}\n"

# åˆ›å»ºä¸´æ—¶ç›®å½•
TEMP_DIR="PWD_Colab_Upload"
rm -rf $TEMP_DIR
mkdir -p $TEMP_DIR

echo "ðŸ“¦ å¤åˆ¶å¿…éœ€æ–‡ä»¶..."

# å¤åˆ¶Pythonæ–‡ä»¶
cp *.py $TEMP_DIR/ 2>/dev/null || true

# å¤åˆ¶é…ç½®æ–‡ä»¶
cp -r config $TEMP_DIR/

# å¤åˆ¶requirements
cp requirements.txt $TEMP_DIR/

# å¤åˆ¶æ–‡çŒ®
if [ -d "æ–‡çŒ®" ]; then
    cp -r æ–‡çŒ® $TEMP_DIR/
    echo -e "${GREEN}âœ“ å·²å¤åˆ¶æ–‡çŒ®æ–‡ä»¶å¤¹${NC}"
else
    echo "âš ï¸  æœªæ‰¾åˆ°æ–‡çŒ®æ–‡ä»¶å¤¹ï¼Œè¯·æ‰‹åŠ¨æ·»åŠ "
    mkdir -p $TEMP_DIR/æ–‡çŒ®
fi

# å¤åˆ¶Notebook
cp PWD_KG_Colab.ipynb $TEMP_DIR/

# åˆ›å»ºREADME
cat > $TEMP_DIR/README.txt << 'EOF'
Colabä¸Šä¼ æ–‡ä»¶åŒ…

ä¸Šä¼ æ­¥éª¤:
1. å°†æ­¤æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°Google Drive
2. é‡å‘½åä¸º PWD_KG
3. æ‰“å¼€ PWD_KG_Colab.ipynb
4. è¿è¡Œæ‰€æœ‰å•å…ƒæ ¼

è¯¦ç»†è¯´æ˜Žè¯·æŸ¥çœ‹: Colabä½¿ç”¨æŒ‡å—.md
EOF

echo -e "\n${GREEN}âœ“ æ–‡ä»¶å‡†å¤‡å®Œæˆ${NC}"
echo -e "\næ–‡ä»¶åˆ—è¡¨:"
ls -lh $TEMP_DIR/

# æ‰“åŒ…
echo -e "\nðŸ“¦ åˆ›å»ºåŽ‹ç¼©åŒ…..."
zip -r PWD_Colab.zip $TEMP_DIR/ -q

echo -e "\n${GREEN}âœ“ åŽ‹ç¼©åŒ…å·²åˆ›å»º: PWD_Colab.zip${NC}"
echo -e "\nä¸‹ä¸€æ­¥:"
echo "1. ä¸Šä¼  PWD_Colab.zip åˆ° Google Drive"
echo "2. åœ¨Driveä¸­è§£åŽ‹"
echo "3. æ‰“å¼€ PWD_KG_Colab.ipynb"
echo "4. è¿è¡Œæ‰€æœ‰å•å…ƒæ ¼"
echo -e "\nè¯¦ç»†è¯´æ˜Ž: æŸ¥çœ‹ Colabå¿«é€Ÿå¼€å§‹.md"

# æ¸…ç†ä¸´æ—¶ç›®å½•
rm -rf $TEMP_DIR

echo -e "\n${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
